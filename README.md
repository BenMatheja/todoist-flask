# todoist-flask

## Introduction
Using Todoist-Webhooks (https://developer.todoist.com/sync/v7/#webhooks)

App performs input validation and listens to a specific task title.
If this specific task is completed, it creates another task for the day.
I'm using it to remember when to clock out at work

## Installation
Perform the following steps

```shell
$ git clone git@github.com:BenMatheja/todoist-flask.git
$ cd todoist-flask
$ virtualenv flask
New python executable in flask/bin/python
Installing setuptools............................done.
Installing pip...................done.
$ flask/bin/pip install flask
$ cd todoist
$ ../flask/bin/pip install -e .
$ cd ..
$ flask/bin/python app.py
```

Adapt settings_sample.py to correspond with credentials.

```python
# Configuration for Taskrunner

PORT_NUMBER = 8000
TODOIST_CLIENT_SECRET = ""
TODOIST_API_ACCESS = ""
DEV_MODE = True
```
## Testing
Use this sample Request from the Todoist-Webhooks Api generated by the amazing Postman for Curl
```shell
curl --request POST \
  --url http://localhost:5000/todoist/events/v1/tasks \
  --header 'cache-control: no-cache' \
  --header 'content-type: application/json' \
  --header 'postman-token: 4e8be19e-d5bf-bed6-6fc7-4b37af2908c2' \
  --header 'user-agent: Todoist-Webhooks' \
  --header 'x-real-ip: 127.0.0.1' \
  --header 'x-todoist-delivery-id: 1855589' \
  --header 'x-todoist-hmac-sha256: UEEq9si3Vf9yRSrLthbpazbb69kP9+CZQ7fXmVyjhPs=' \
  --data '{\n    "event_name": "item:added",\n    "user_id": 1234,\n    "event_data": {\n      "day_order": -1,\n      "assigned_by_uid": 1855589,\n      "is_archived": 0,\n      "labels": [],\n      "sync_id": null,\n      "in_history": 0,\n      "has_notifications": 0,\n      "indent": 1,\n      "checked": 0,\n      "date_added": "Fri 26 Sep 2014 08:25:05 +0000",\n      "id": 33511505,\n      "content": "Task1",\n      "user_id": 1234,\n      "due_date_utc": null,\n      "children": null,\n      "priority": 1,\n      "item_order": 1,\n      "is_deleted": 0,\n      "responsible_uid": null,\n      "project_id": 128501470,\n      "collapsed": 0,\n      "date_string": ""\n    }\n}'
```